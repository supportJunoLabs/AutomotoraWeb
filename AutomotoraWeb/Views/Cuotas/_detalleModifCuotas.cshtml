@model DLL_Backend.TRRefinanciacion
@using AutomotoraWeb.Helpers;
@using DLL_Backend;

@{
    bool cambiarSucursal = ViewBag.Multisucursal;
}

<div id="divOperacion">
    <div class="well" style="margin-top: 10px; width: 1000px; height: 810px;">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#nueva_tab" data-toggle="tab">Nueva Financiacion</a></li>
            <li><a href="#anterior_tab" data-toggle="tab">Financiacion Vigente</a></li>
        </ul>
        <div id="tabContent" class="tab-content">
            <div class="tab-pane active in" id="nueva_tab">
                <div id="divNuevaFinanciacion">
                    <div class="dataLine">
                        <div class="display-label">
                            @Html.LabelForRequired(model => model.Sucursal)
                        </div>
                        <div class="editor-field editor-field-medium medium renglon-alto">
                            @Html.DdlOrDisplayFor(model => model.Sucursal.Codigo, !cambiarSucursal, model => model.Sucursal.Nombre,
                                new SelectList(ViewBag.Sucursales, "Codigo", "Nombre"), null,
                                new { id = "ddlSucursales", @class = "medium" })
                            @Html.ValidationMessageFor(model => model.Sucursal)
                        </div>
                    </div>
                    <div class="clear-both"></div>

                    <div class="dataLine">
                        <div class="display-label ">
                            @Html.LabelForRequired(model => model.Observaciones)
                        </div>
                        <div class="editor-field editor-field-xxlarge">
                            @Html.TextBoxFor(model => model.Observaciones)
                            @Html.ValidationMessageFor(model => model.Observaciones)

                        </div>
                    </div>
                    <div class="clear-both"></div>

                    FALTA FUNCIONALIDAD DE MODIFICAR, SIMILAR A CREACION EN VENTA, partiendo de cuotas vigentes. 
                    Cuidado que comparte vistas con Cobrar
                </div>
                <div class="clear-both"></div>

                <div class="btn-toolbar">
                    <div class="floatRight">
                        @(Html.Bootstrap().SubmitButton().Class("btn btn-primary icon-save").Text(" Confirmar Modificacion"))
                    </div>
                </div>
                <div class="clear-both"></div>
            </div>
            <div class="tab-pane fade" id="anterior_tab">
                <div id="divAnteriorFinanciacion">
                    <div style="margin-top: 10px">
                        @Html.Partial("_grillacuotasVigentes", Model.Venta.Financiacion.CuotasVigentes)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    function OnBeginCallbackCuotas(s, e) {
        e.customArgs["idSession"] = $('#idSession').val();
    }
</script>
