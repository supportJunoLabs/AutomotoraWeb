@model DLL_Backend.Cliente
@using AutomotoraWeb.Helpers;
@using AutomotoraWeb.Controllers.General;

@{
    ViewBag.Title = "Clientes: Agregar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<span class="validation-summary-errors">@ViewBag.ErrorMessage</span>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    @Html.ValidationSummary("Se han producido errores:")
   
    
    <div class="espacio"/>
    
    <fieldset>
        <legend></legend>

        <div class="editor-label">
            @Html.LabelForRequired(model => model.Nombre)
        </div>
        <div class="editor-field editor-field-xxlarge">
            @Html.EditorFor(model => model.Nombre)
            @Html.ValidationMessageFor(model => model.Nombre)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label">
            @Html.LabelForRequired(model => model.Direccion)
        </div>
        <div class="editor-field editor-field-xxlarge">
            @Html.EditorFor(model => model.Direccion)
            @Html.ValidationMessageFor(model => model.Direccion)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.Ciudad)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.Ciudad)
            @Html.ValidationMessageFor(model => model.Ciudad)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.CodigoPostal)
        </div>
          <div class="editor-field editor-field-medium">
            @Html.EditorFor(model => model.CodigoPostal)
            @Html.ValidationMessageFor(model => model.CodigoPostal)
        </div>
        <div class="clear-both"></div>

       

        <div class="editor-label">
            @Html.LabelForRequired(model => model.Telefono)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.Telefono)
            @Html.ValidationMessageFor(model => model.Telefono)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.OtroTelefono)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.OtroTelefono)
            @Html.ValidationMessageFor(model => model.OtroTelefono)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.Fax)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.Fax)
            @Html.ValidationMessageFor(model => model.Fax)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label editor-date-field">
            @Html.LabelForRequired(model => model.FechaNac)
        </div>
        <div class="editor-field editor-field-small">
            @Html.TextBoxFor(model => model.FechaNac, new { @class = "calendarAW" })
            @Html.ValidationMessageFor(model => model.FechaNac)
        </div>
        <div class="clear-both"></div>

   
        

         <div class="editor-label ">
            @Html.LabelForRequired(model => model.Cedula)
        </div>
        <div class="editor-field editor-field-medium">
            @Html.EditorFor(model => model.Cedula)
            @Html.ValidationMessageFor(model => model.Cedula)
        </div>
        <div class="clear-both"></div>

           <div class="editor-label ">
            @Html.LabelForRequired(model => model.Credencial)
        </div>
        <div class="editor-field editor-field-medium">
            @Html.EditorFor(model => model.Credencial)
            @Html.ValidationMessageFor(model => model.Credencial)
        </div>
        <div class="clear-both"></div>

                <div class="editor-label ">
            @Html.LabelForRequired(model => model.TipoOtroDoc)
        </div>
        <div class="editor-field editor-field-xxlarge">
            @Html.DropDownListFor(model => model.TipoOtroDoc, new SelectList(ViewBag.TiposOtroDoc), "---")
            @Html.ValidationMessageFor(model => model.TipoOtroDoc)
        </div>
        <div class="clear-both"></div>

         <div class="editor-label ">
            @Html.LabelForRequired(model => model.Pais)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.Pais)
            @Html.ValidationMessageFor(model => model.Pais)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.NumeroOtroDoc)
        </div>
        <div class="editor-field editor-field-medium">
            @Html.EditorFor(model => model.NumeroOtroDoc)
            @Html.ValidationMessageFor(model => model.NumeroOtroDoc)
        </div>
        <div class="clear-both"></div>

       <div class="editor-label ">
            @Html.LabelForRequired(model => model.Rut)
        </div>
        <div class="editor-field editor-field-large">
            @Html.EditorFor(model => model.Rut)
            @Html.ValidationMessageFor(model => model.Rut)
        </div>
        <div class="clear-both"></div>

        <div class="editor-label ">
            @Html.LabelForRequired(model => model.RazonSocial)
        </div>
        <div class="editor-field editor-field-xxlarge">
            @Html.EditorFor(model => model.RazonSocial)
            @Html.ValidationMessageFor(model => model.RazonSocial)
        </div>
        <div class="clear-both"></div>

         <div class="editor-label ">
            @Html.LabelForRequired(model => model.Observaciones)
        </div>
        <div class="editor-field editor-field-xxlarge">
            @Html.TextAreaFor(model => model.Observaciones, new { style="width: 530px; height: 60px" })
            @Html.ValidationMessageFor(model => model.Observaciones)
        </div>
        <div class="clear-both"></div>

          <div class="editor-label ">
            @Html.LabelForRequired(model => model.Ecivil)
        </div>
        <div class="editor-field editor-field-large">
            @Html.DropDownListFor(model => model.Ecivil.Codigo, new SelectList(ViewBag.EstadosCiviles, "Codigo", "Descripcion" ), new { id = "ddlMaritalStatus" })
            @Html.ValidationMessageFor(model => model.Ecivil)
        </div>
        <div class="clear-both"></div>


        <div id="spouseBlock" style="display: block;">
            <h3>Conyuge</h3>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.Nombre)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.Nombre)
                @Html.ValidationMessageFor(model => model.Conyuge.Nombre)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.Cedula)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.Cedula)
                @Html.ValidationMessageFor(model => model.Conyuge.Cedula)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.Credencial)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.Credencial)
                @Html.ValidationMessageFor(model => model.Conyuge.Credencial)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.TipoOtroDoc)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.TipoOtroDoc)
                @Html.ValidationMessageFor(model => model.Conyuge.TipoOtroDoc)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.NumeroOtroDoc)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.NumeroOtroDoc)
                @Html.ValidationMessageFor(model => model.Conyuge.NumeroOtroDoc)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label">
                @Html.LabelForRequired(model => model.Conyuge.Nupcias)
            </div>
            <div class="editor-field editor-field-xxlarge">
                @Html.EditorFor(model => model.Conyuge.Nupcias)
                @Html.ValidationMessageFor(model => model.Conyuge.Nupcias)
            </div>
            <div class="clear-both"></div>

            <div class="editor-label ">
                @Html.LabelForRequired(model => model.Conyuge.SepBienes)
            </div>
            <div class="editor-field">
                @Html.CheckBoxFor(model => model.Conyuge.SepBienes)
                @Html.ValidationMessageFor(model => model.Conyuge.SepBienes)
            </div>
            <div class="clear-both"></div>

        </div>

        <div class="espacio2"></div>
        <div class="btn-toolbar">
            @(Html.Bootstrap().SubmitButton().Class("btn btn-primary icon-save").Text(" Guardar"))
            @(Html.Bootstrap().ActionLinkButton("Cancelar", BaseController.SHOW).Class("btn btn-default"))
        </div>
        
       
    </fieldset>
}

@section Scripts {

    <script type="text/javascript">

        var actualMaritalStatus = $("#ddlMaritalStatus option:selected").val()
        _showHideSpouseBlock(actualMaritalStatus);

        $("#ddlMaritalStatus").change(function () {
            var optionSelected = $(this).val();
            _showHideSpouseBlock(optionSelected);
        });

        function _showHideSpouseBlock(optionSelected) {
            //alert(optionSelected);
            $.getJSON("/Clientes/mostrarDatosConyuge", { codEcivil: optionSelected},
                function (data) {
                    //alert(data.mostrar);
                    if (!data.mostrar) {
                        //alert("1");
                        $("#spouseBlock").hide();
                    } else {
                        //alert("2");
                        $("#spouseBlock").show();
                    }
                },
                function () {
                    alert("Se produjo algun error en invocacion a metodo Json");
                }
            );
            //alert("final");
        }
    </script>

}


